{"version":3,"sources":["../../../../src/app/register/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\n\nexport default function RegisterPage() {\n  const router = useRouter();\n  const [form, setForm] = useState({ email: \"\", username: \"\", displayName: \"\", password: \"\", confirmPassword: \"\" });\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  function update(field: string, value: string) {\n    setForm((f) => ({ ...f, [field]: value }));\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setError(\"\");\n\n    if (form.password !== form.confirmPassword) {\n      setError(\"Passwords do not match\");\n      return;\n    }\n\n    if (form.password.length < 8) {\n      setError(\"Password must be at least 8 characters\");\n      return;\n    }\n\n    if (!/^[a-zA-Z0-9_-]+$/.test(form.username)) {\n      setError(\"Username can only contain letters, numbers, hyphens and underscores\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/api/auth/register\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(form),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || \"Registration failed\");\n        return;\n      }\n\n      router.push(data.role === \"admin\" ? \"/admin\" : \"/\");\n      router.refresh();\n    } catch {\n      setError(\"Something went wrong. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const fields = [\n    { id: \"email\", label: \"Email\", type: \"email\", placeholder: \"you@example.com\" },\n    { id: \"username\", label: \"Username\", type: \"text\", placeholder: \"roadster_fan\" },\n    { id: \"displayName\", label: \"Display Name\", type: \"text\", placeholder: \"John Smith\" },\n    { id: \"password\", label: \"Password\", type: \"password\", placeholder: \"••••••••\" },\n    { id: \"confirmPassword\", label: \"Confirm Password\", type: \"password\", placeholder: \"••••••••\" },\n  ];\n\n  return (\n    <div className=\"min-h-[80vh] flex items-center justify-center px-4 py-8\">\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8\">\n        <h1 className=\"text-3xl font-bold text-brg text-center mb-2\">Join the Club</h1>\n        <p className=\"text-center text-gray-500 mb-8\">Create your Side Curtains account</p>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 text-sm\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {fields.map((f) => (\n            <div key={f.id}>\n              <label htmlFor={f.id} className=\"block text-sm font-medium text-gray-700 mb-1\">\n                {f.label}\n              </label>\n              <input\n                id={f.id}\n                type={f.type}\n                required\n                value={form[f.id as keyof typeof form]}\n                onChange={(e) => update(f.id, e.target.value)}\n                className=\"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brg focus:border-transparent outline-none transition text-gray-900\"\n                placeholder={f.placeholder}\n              />\n            </div>\n          ))}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-brg text-cream py-2.5 rounded-lg font-semibold hover:bg-brg-light transition-colors disabled:opacity-50\"\n          >\n            {loading ? \"Creating account...\" : \"Create Account\"}\n          </button>\n        </form>\n\n        <p className=\"mt-6 text-center text-sm text-gray-500\">\n          Already have an account?{\" \"}\n          <Link href=\"/login\" className=\"text-brg font-semibold hover:underline\">\n            Sign In\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}